<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORS</title>
</head>

<body style="display:flex;flex-direction:column;">
    <a href="https://www.google.com">Google</a>
    <a href="https://www.facebook.com">Facebook</a>
    <a href="index.html">Here</a>
    <a href="../01-SpecifyingTheRequest/specifyingTheRequest.html">specifyingTheRequest</a>
</body>
<script>
   window.onload= function () {
        // Is there any chance that cross-origin requests will succeed?
        var supportsCORS = (new XMLHttpRequest()).withCredentials !== undefined;
        // Loop through all links in the document
        var links = document.getElementsByTagName('a');
        for (var i = 0; i < links.length; i++) {
            var link = links[i];
            if (!link.href) continue; // Skip anchors that are not hyperlinks
            if (link.title) continue; // Skip links that already have tooltips
            // If this is a cross-origin link
            if (link.host !== location.host || link.protocol !== location.protocol) {
                link.title = "Off-site link"; // Assume we can't get any more info
                if (!supportsCORS) continue; // Quit now if no CORS support
                // Otherwise, we might be able to learn more about the link
                // So go ahead and register the event handlers so we can try.
            }
            // Register event handler to download link details on mouse over
            if (link.addEventListener)
                link.addEventListener("mouseover", mouseoverHandler, false);
            else
                link.attachEvent("onmouseover", mouseoverHandler);
        }
        function mouseoverHandler(e) {
            var link = e.target || e.srcElement; // The <a> element
            var url = link.href; // The link URL
            var req = new XMLHttpRequest(); // New request
            req.open("GET", url); // Ask for just the headers
            //set Acept header
            req.setRequestHeader("Accept", "*/*");
            req.onreadystatechange = function () { // Event handler
                if (req.readyState !== 4) return; // Ignore incomplete requests
                if (req.status === 200) { // If successful
                    var type = req.getResponseHeader("Content-Type"); // Get
                    var size = req.getResponseHeader("Content-Length"); // link
                    var date = req.getResponseHeader("Last-Modified"); // details
                    // Display the details in a tooltip.
                    link.title = "Type: " + type + " \n" +
                        "Size: " + size + " \n" + "Date: " + date;
                }
                else {
                    // If request failed, and the link doesn't already have an
                    // "Off-site link" tooltip, then display the error.
                    if (!link.title)
                        link.title = "Couldn't fetch details: \n" +
                            req.status + " " + req.statusText;
                }
            };
            req.send(null);

            // Remove handler: we only want to fetch these headers once.
            if (link.removeEventListener)
                link.removeEventListener("mouseover", mouseoverHandler, false);
            else
                link.detachEvent("onmouseover", mouseoverHandler);
        }
    };
</script>

</html>